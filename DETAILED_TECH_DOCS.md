# –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Proton_bot

## 1. –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**Proton_bot** - —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π Telegram-–±–æ—Ç–∞ –∏ REST API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Laravel-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏) –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ Telegram.

### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ API –∫–ª—é—á–∏

### 1.2 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: Python 3.11+
- **Web Framework**: FastAPI 0.111.0
- **Telegram Bot**: aiogram 3.4.1
- **HTTP Client**: aiohttp 3.9.5, requests 2.31.0
- **Server**: uvicorn 0.29.0
- **Configuration**: python-dotenv 1.0.1
- **Data Validation**: pydantic

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 2.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   External API  ‚îÇ    ‚îÇ   FastAPI App   ‚îÇ    ‚îÇ  Telegram Bot   ‚îÇ
‚îÇ   (Laravel)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Port 8000)   ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (aiogram)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ   Logging &     ‚îÇ
                       ‚îÇ   Monitoring    ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2 –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:
   ```
   User ‚Üí Telegram Bot ‚Üí External API ‚Üí Confirmation
   ```

2. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
   ```
   External System ‚Üí FastAPI ‚Üí Telegram Bot ‚Üí User
   ```

3. **–û—Ç–ø–∏—Å–∫–∞**:
   ```
   User ‚Üí Telegram Bot ‚Üí External API ‚Üí Confirmation
   ```

## 3. –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 3.1 Telegram Bot (aiogram)

#### 3.1.1 –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |
|---------|----------|------------------|
| `/start` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ |
| `/id` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/stop` | –û—Ç–ø–∏—Å–∫–∞ | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |

#### 3.1.2 –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

```python
# –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
phone_regex = r"^\+?\d{10,15}$"
if not re.match(phone_regex, phone_number):
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**:
- `+79001234567` (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π)
- `89001234567` (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π)
- `9001234567` (–±–µ–∑ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã)

#### 3.1.3 –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã

- **ReplyKeyboardMarkup**: –ö–Ω–æ–ø–∫–∞ "üìû –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º"
- **InlineKeyboardMarkup**: –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞—è–≤–∫–µ" (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ URL)

### 3.2 FastAPI Application

#### 3.2.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

```python
class Notification(BaseModel):
    telegram_id: int      # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
    text: str            # –¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    url: str | None      # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
```

#### 3.2.2 Endpoint `/notify`

**–ú–µ—Ç–æ–¥**: `POST`

**–ó–∞–≥–æ–ª–æ–≤–∫–∏**:
- `Content-Type: application/json`
- `x-api-key: {NOTIFY_SECRET}`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "telegram_id": 123456789,
  "text": "–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ #12345",
  "url": "https://app.protonrent.ru/orders/12345"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "status": "ok"
}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
```json
{
  "status": "error",
  "detail": "Invalid API key"
}
```

#### 3.2.3 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API

```python
@app.post("/notify")
async def notify(data: Notification, x_api_key: str = Header(default=None)):
    if NOTIFY_SECRET and x_api_key != NOTIFY_SECRET:
        return {"status": "error", "detail": "Invalid API key"}
```

### 3.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API

#### 3.3.1 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint**: `POST {API_URL}/telegram/register`

**–ó–∞–ø—Ä–æ—Å**:
```json
{
  "phone": "+79001234567",
  "telegram_id": 123456789
}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞**:
- `200`: –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `4xx/5xx`: –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### 3.3.2 –û—Ç–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint**: `POST {API_URL}/telegram/unsubscribe`

**–ó–∞–ø—Ä–æ—Å**:
```json
{
  "telegram_id": 123456789
}
```

## 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 4.1 –§–∞–π–ª .env

```env
# Telegram Bot Configuration
BOT_TOKEN=7923122647:AAGCQ0liGnLyg9mqj_tHcyGuu0WALY9XP-c

# External API Configuration
API_URL=https://app.protonrent.ru/

# Security
NOTIFY_SECRET=your_secure_api_key_here
```

### 4.2 –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
required_env_vars = ['BOT_TOKEN', 'API_URL', 'NOTIFY_SECRET']
for var in required_env_vars:
    if not os.getenv(var):
        raise ValueError(f"Missing required environment variable: {var}")
```

## 5. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è

### 5.1 –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### 5.1.1 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv .venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/Mac)
source .venv/bin/activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
.venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

#### 5.1.2 –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
python -m uvicorn main:app --host 127.0.0.1 --port 8000 --reload

# –ó–∞–ø—É—Å–∫ –±–µ–∑ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
python -m uvicorn main:app --host 127.0.0.1 --port 8000
```

### 5.2 Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### 5.2.1 –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

```bash
# –°–±–æ—Ä–∫–∞ —Å —Ç–µ–≥–æ–º
docker build -t proton-bot:latest .

# –°–±–æ—Ä–∫–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
docker build --platform linux/amd64 -t proton-bot:latest .
```

#### 5.2.2 –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
docker run -d --name proton-bot \
  --env-file .env \
  -p 8000:8000 \
  proton-bot:latest

# –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
docker run -d --name proton-bot \
  --restart unless-stopped \
  --env-file .env \
  -p 8000:8000 \
  proton-bot:latest
```

#### 5.2.3 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ deploy.sh
chmod +x deploy.sh
./deploy.sh
```

### 5.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 5.3.1 –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker logs proton-bot

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f proton-bot

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker logs --tail 100 proton-bot
```

#### 5.3.2 –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker inspect proton-bot

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats proton-bot
```

## 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 6.1 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

#### 6.1.1 –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```bash
curl -X POST "http://localhost:8000/notify" \
  -H "Content-Type: application/json" \
  -H "x-api-key: your_secret_key" \
  -d '{
    "telegram_id": 123456789,
    "text": "–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ",
    "url": "https://example.com"
  }'
```

#### 6.1.2 –¢–µ—Å—Ç –±–µ–∑ API –∫–ª—é—á–∞

```bash
curl -X POST "http://localhost:8000/notify" \
  -H "Content-Type: application/json" \
  -d '{
    "telegram_id": 123456789,
    "text": "–¢–µ—Å—Ç –±–µ–∑ –∫–ª—é—á–∞"
  }'
```

### 6.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
2. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ API
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## 7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 7.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **API –∫–ª—é—á–∏**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/notify` —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω—ã–π `x-api-key`
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ö–ª—é—á —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å `NOTIFY_SECRET` –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ**: –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫—É 401

### 7.2 –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- **Telegram ID**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
- **–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞**: –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞
- **HTML-–∫–æ–Ω—Ç–µ–Ω—Ç**: –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

### 7.3 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–•—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**

## 8. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8.1 –¢–µ–∫—É—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: ~1000 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π/–º–∏–Ω—É—Ç—É
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: <100ms –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–ü–∞–º—è—Ç—å**: ~50MB –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä
- **CPU**: –ù–∏–∑–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ

### 8.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

#### 8.2.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ uvicorn

```bash
# –ó–∞–ø—É—Å–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–æ—Ä–∫–µ—Ä–∞–º–∏
uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–æ–≤
uvicorn main:app --host 0.0.0.0 --port 8000 --log-level info
```

#### 8.2.2 –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
docker run -d --name proton-bot-1 --env-file .env -p 8001:8000 proton-bot:latest
docker run -d --name proton-bot-2 --env-file .env -p 8002:8000 proton-bot:latest
```

### 8.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
curl -w "@curl-format.txt" -o /dev/null -s "http://localhost:8000/notify"
```

## 9. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### 9.1 –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 9.1.1 –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ù–µ–≤–µ—Ä–Ω—ã–π `BOT_TOKEN`
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
- –û—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
curl "https://api.telegram.org/bot{BOT_TOKEN}/getMe"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs proton-bot
```

#### 9.1.2 API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ù–µ–≤–µ—Ä–Ω—ã–π `NOTIFY_SECRET`
- –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–Ω–µ—à–Ω–∏–º API
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker exec proton-bot env | grep -E "(API_URL|NOTIFY_SECRET)"

# –¢–µ—Å—Ç –≤–Ω–µ—à–Ω–µ–≥–æ API
curl -X POST "{API_URL}/telegram/register" \
  -H "Content-Type: application/json" \
  -d '{"phone": "+79001234567", "telegram_id": 123}'
```

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: $(19 –∞–≤–≥—É—Å—Ç–∞ 2025)*
*–í–µ—Ä—Å–∏—è: 1.0*
